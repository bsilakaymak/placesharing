(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[5],[,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),r=Object(n.createContext)({isLoggedIn:!1,token:null,userId:null,login:function(){},logout:function(){}})},,function(e,t,a){"use strict";var n=a(0),r=a.n(n);a(51);t.a=function(e){return r.a.createElement("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay")},r.a.createElement("div",{className:"lds-dual-ring"}))}},,function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(8),c=a.n(l);a(49);t.a=function(e){return c.a.createPortal(r.a.createElement("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}},,,,,function(e,t,a){"use strict";var n=a(11),r=a.n(n),l=a(13),c=a(3),u=a(0);t.a=function(){var e=Object(u.useState)(!1),t=Object(c.a)(e,2),a=t[0],n=t[1],o=Object(u.useState)(),s=Object(c.a)(o,2),i=s[0],m=s[1],E=Object(u.useRef)([]),d=Object(u.useCallback)(function(){var e=Object(l.a)(r.a.mark((function e(t){var a,l,c,u,o,s,i=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:"GET",l=i.length>2&&void 0!==i[2]?i[2]:null,c=i.length>3&&void 0!==i[3]?i[3]:{},n(!0),u=new AbortController,E.current.push(u),e.prev=6,e.next=9,fetch(t,{method:a,body:l,headers:c,signal:u.signal});case 9:return o=e.sent,e.next=12,o.json();case 12:if(s=e.sent,E.current=E.current.filter((function(e){return e!==u})),o.ok){e.next=16;break}throw new Error(s.message);case 16:return n(!1),e.abrupt("return",s);case 20:throw e.prev=20,e.t0=e.catch(6),m(e.t0.message||"Something went wrong, please try again."),n(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(u.useEffect)((function(){return function(){E.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:a,error:i,sendRequest:d,clearError:function(){m(null)}}}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(27),c=a(23);t.a=function(e){var t=e.error,a=e.onClear,n=e.header;return r.a.createElement(l.a,{onCancel:a,header:n||"An Error Occurred!!!",show:!!t,footer:r.a.createElement(c.a,{onClick:a},"Okay")},r.a.createElement("div",null,t))}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(2);a(55);t.a=function(e){return e.href?r.a.createElement("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href},e.children):e.to?r.a.createElement(l.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger")},e.children):r.a.createElement("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled},e.children)}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),r=Object(n.createContext)({messagesData:[],id:""})},,function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(8),c=a.n(l),u=(a(54),a(59)),o=a(16),s=function(e){var t=r.a.createElement("div",{className:"modal ".concat(e.className),style:e.style},r.a.createElement("header",{className:"modal__header ".concat(e.headerClass)},r.a.createElement("h2",null,e.header)),r.a.createElement("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()}},r.a.createElement("div",{className:"modal__content ".concat(e.contentClass)},e.children),r.a.createElement("footer",{className:"modal__footer ".concat(e.footerClass)},e.footer)));return c.a.createPortal(t,document.getElementById("modal-hook"))};t.a=function(e){return r.a.createElement(n.Fragment,null,e.show&&r.a.createElement(o.a,{onClick:e.onCancel}),r.a.createElement(u.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal"},r.a.createElement(s,e)))}},,,,,,,function(e,t,a){e.exports=a(58)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,function(e,t,a){},function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(8),u=a.n(c),o=(a(39),a(3)),s=a(9),i=a(2),m=(a(40),function(e){return l.a.createElement("header",{className:"main-header"},e.children)}),E=a(59),d=(a(41),function(e){var t=l.a.createElement(E.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0},l.a.createElement("aside",{className:"side-drawer",onClick:e.onClick},e.children));return u.a.createPortal(t,document.getElementById("drawer-hooks"))}),f=(a(44),a(12)),b=(a(45),function(e){var t=Object(r.useState)(""),a=Object(o.a)(t,2),n=a[0],c=a[1],u=Object(s.g)();return l.a.createElement("form",{className:"search-bar__form",onSubmit:function(e){e.preventDefault(),n.length>0&&u.push("/search?q=".concat(n))}},l.a.createElement("input",{className:"search-bar__text",type:"text",name:"search",placeholder:"Search...",value:n,onChange:function(e){c(e.target.value)}}),l.a.createElement("button",{className:"search-bar__submit",type:"submit"},l.a.createElement("i",{className:"fas fa-search"})))}),h=function(e){var t=Object(r.useContext)(f.a);return l.a.createElement("ul",{className:"nav-links no-select"},l.a.createElement("li",null,l.a.createElement(i.c,{to:"/",exact:!0},"ALL USERS")),t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(i.c,{to:"/".concat(t.userId,"/places")},"MY PLACES")),t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(i.c,{to:"/places/new"},"ADD PLACES")),t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(i.c,{to:"/".concat(t.userId,"/my")},"MY")),t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(b,null)),!t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(i.c,{to:"/auth"},"AUTHENTICATE")),t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement("button",{onClick:t.logout},"LOGOUT")))},p=a(16),g=(a(50),function(e){var t=Object(r.useState)(!1),a=Object(o.a)(t,2),n=a[0],c=a[1],u=function(){c(!1)};return l.a.createElement(r.Fragment,null,n&&l.a.createElement(p.a,{onClick:u}),l.a.createElement(d,{show:n,onClick:u},l.a.createElement("nav",{className:"main-navigation__drawer-nav"},l.a.createElement(h,null))),l.a.createElement(m,null,l.a.createElement("button",{className:"main-navigation__menu-btn",onClick:function(){c(!0)}},l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null)),l.a.createElement("h1",{className:"main-navigation__title no-select"},l.a.createElement(i.b,{to:"/"},"YourPlaces")),l.a.createElement("nav",{className:"main-navigation__header-nav"},l.a.createElement(h,null))))}),v=a(25),O=a(14);function k(){var e=Object(r.useContext)(f.a);return Object(r.useEffect)((function(){!function(){var t=new URL(window.location).searchParams.get("token"),a=new URL(window.location).searchParams.get("userId");e.login(a,t)}()})),null}var w=a(11),j=a.n(w),y=a(13),N=(a(53),a(21)),I=a(22);a(56),a(57);function C(e){return l.a.createElement("div",null,e.place&&l.a.createElement("div",null,l.a.createElement(i.b,{to:"/places/".concat(e.item._id)},l.a.createElement("p",{className:"search-result__name"},e.item.title))),e.user&&l.a.createElement("div",null,l.a.createElement(i.b,{to:"/".concat(e.item._id,"/places")},l.a.createElement("p",{className:"search-result__name"},e.item.name))))}function x(e){var t=e.items,a=t&&t.places&&t.places.length,n=t&&t.users&&t.users.length;return l.a.createElement("div",null,a?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{className:"search-headers"},"PLACES"),t.places.map((function(e){return l.a.createElement(C,{key:e.id,item:e,place:!0})}))):l.a.createElement("p",null,"No places found"),n?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{className:"search-headers"},"USERS"),t.users.map((function(e){return l.a.createElement(C,{key:e.id,item:e,user:!0})}))):l.a.createElement("p",null,"No users found"))}function S(){var e=Object(r.useState)({}),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(N.a)(),u=c.isLoading,s=c.error,i=c.sendRequest,m=c.clearError,E=new URL(window.location).searchParams.get("q");return Object(r.useEffect)((function(){(function(){var e=Object(y.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i("".concat("https://placesharing.herokuapp.com/api","/search?q=").concat(E));case 3:t=e.sent,n(t.results),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[E]),l.a.createElement("div",{className:"search__page"},l.a.createElement(I.a,{error:s,onClear:m}),u&&l.a.createElement("div",{className:"center"},l.a.createElement(O.a,null)),!u&&a&&l.a.createElement(x,{items:a}))}var _=l.a.lazy((function(){return a.e(9).then(a.bind(null,120))})),L=l.a.lazy((function(){return a.e(12).then(a.bind(null,165))})),P=l.a.lazy((function(){return a.e(13).then(a.bind(null,166))})),z=l.a.lazy((function(){return Promise.all([a.e(21),a.e(11)]).then(a.bind(null,167))})),D=l.a.lazy((function(){return a.e(18).then(a.bind(null,109))})),T=l.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(4),a.e(2),a.e(7)]).then(a.bind(null,181))})),A=l.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2)]).then(a.bind(null,139))})),R=l.a.lazy((function(){return Promise.all([a.e(0),a.e(17)]).then(a.bind(null,118))})),U=l.a.lazy((function(){return Promise.all([a.e(0),a.e(3),a.e(15)]).then(a.bind(null,172))})),q=l.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(4),a.e(14)]).then(a.bind(null,119))})),B=l.a.lazy((function(){return Promise.all([a.e(0),a.e(3),a.e(16)]).then(a.bind(null,173))})),F=l.a.lazy((function(){return a.e(19).then(a.bind(null,121))})),J=l.a.lazy((function(){return a.e(10).then(a.bind(null,178))})),Y=l.a.lazy((function(){return a.e(20).then(a.bind(null,174))})),G=function(){var e,t=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(r.useState)(),u=Object(o.a)(c,2),s=u[0],i=u[1],m=Object(r.useState)(!1),E=Object(o.a)(m,2),d=E[0],f=E[1],b=Object(r.useCallback)((function(e,t,a){l(t),f(e);var n=a||new Date((new Date).getTime()+36e5);i(n),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:n.toISOString()}))}),[]),h=Object(r.useCallback)((function(){l(null),i(null),f(null),localStorage.removeItem("userData")}),[]);return Object(r.useEffect)((function(){if(a&&s){var e=s.getTime()-(new Date).getTime();n=setTimeout(h,e)}else clearTimeout(n)}),[a,h,s]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&b(e.userId,e.token,new Date(e.expiration))}),[b]),{token:a,login:b,logout:h,userId:d}}(),a=t.token,c=t.login,u=t.logout,m=t.userId,E=Object(r.useState)([]),d=Object(o.a)(E,2),b=d[0];d[1];return e=a?l.a.createElement(s.d,null,l.a.createElement(s.b,{path:"/:userId/my"},l.a.createElement(T,null)),l.a.createElement(s.b,{path:"/",exact:!0},l.a.createElement(A,null)),l.a.createElement(s.b,{path:"/search",exact:!0,component:Object(s.i)(S)}),l.a.createElement(s.b,{path:"/:userId/places",exact:!0},l.a.createElement(q,null)),l.a.createElement(s.b,{path:"/places/new",exact:!0},l.a.createElement(U,null)),l.a.createElement(s.b,{path:"/places/:placeId",exact:!0},l.a.createElement(J,null)),l.a.createElement(s.b,{path:"/places/:placeId/edit"},l.a.createElement(B,null)),l.a.createElement(s.b,{path:"/:userId/friends",exact:!0},l.a.createElement(R,null)),l.a.createElement(s.b,{path:"/:userId/bucketlist"},l.a.createElement(F,null)),l.a.createElement(s.b,{path:"/:userId/messages"},l.a.createElement(D,null),l.a.createElement(_,null)),l.a.createElement(s.a,{to:"/"})):l.a.createElement(s.d,null,l.a.createElement(s.b,{path:"/",exact:!0},l.a.createElement(A,null)),l.a.createElement(s.b,{path:"/:userId/places",exact:!0},l.a.createElement(q,null)),l.a.createElement(s.b,{path:"/places/:placeId",exact:!0},l.a.createElement(J,null)),l.a.createElement(s.b,{path:"/auth"},l.a.createElement(z,null)),l.a.createElement(s.b,{path:"/social"},l.a.createElement(k,null)),l.a.createElement(s.b,{path:"/forgetpassword"},l.a.createElement(L,null)),l.a.createElement(s.b,{path:"/resetpassword/:token"},l.a.createElement(P,null)),l.a.createElement(s.b,{path:"/confirm/:token"},l.a.createElement(Y,null)),l.a.createElement(s.a,{to:"/auth"})),l.a.createElement(f.a.Provider,{value:{isLoggedIn:!!a,token:a,login:c,logout:u,userId:m}},l.a.createElement(v.a.Provider,{value:{messagesData:b}},l.a.createElement(i.a,null,l.a.createElement(g,null),l.a.createElement("main",null,l.a.createElement(r.Suspense,{fallback:l.a.createElement("div",{className:"center"},l.a.createElement(O.a,{asOverlay:!0}))},e)))))};u.a.render(l.a.createElement(G,null),document.getElementById("root"))}],[[34,6,8]]]);
//# sourceMappingURL=main.16f85d66.chunk.js.map