(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[14],{102:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(74),r=a(11),c=a.n(r),l=a(13),s=a(3),i=a(0),o=a.n(i),u=(a(98),a(61)),p=a(9),m=a(2),f=(a(85),a(23)),d=a(27),h=a(110),E=a.n(h),b=(a(99),a(111),function(e){var t=Object(i.useState)(null),a=Object(s.a)(t,2),n=a[0],r=a[1],c=Object(i.useRef)(null),l=e.center,u=e.zoom;return Object(i.useEffect)((function(){E.a.accessToken="pk.eyJ1IjoiYnNpbGFrYXltYWsiLCJhIjoiY2s3aWJscnFwMGhwMTNvbnh2bjhxMGliMSJ9.jCsNT84JezjHr2eBHpt4IA";n||function(e){var t=e.setMap,a=e.mapContainer,n=new E.a.Map({container:a.current,style:"mapbox://styles/mapbox/streets-v11",center:l,zoom:u});n.on("load",(function(){t(n),n.resize()}))}({setMap:r,mapContainer:c})}),[n,l,u]),o.a.createElement("div",{className:"map ".concat(e.className),ref:function(e){return c.current=e},style:e.style})}),v=a(22),k=a(12),O=a(21),j=a(77),g=a(180),y=(a(14),function(e){var t=e.place,a=e.onDeletePlace,n=Object(O.a)(),r=n.error,h=n.sendRequest,E=n.clearError,y=Object(i.useContext)(k.a),N=Object(i.useState)(!1),x=Object(s.a)(N,2),C=x[0],w=x[1],S=Object(i.useState)(!1),I=Object(s.a)(S,2),T=I[0],A=I[1],_=Object(i.useState)(),L=Object(s.a)(_,2),D=L[0],P=L[1],z=Object(i.useState)(),B=Object(s.a)(z,2),J=B[0],M=B[1],F=Object(i.useState)(),H=Object(s.a)(F,2),W=H[0],Y=H[1],R=Object(i.useState)(!0),G=Object(s.a)(R,2),q=G[0],U=G[1],V=Object(i.useState)(!1),K=Object(s.a)(V,2),X=K[0],Q=K[1],Z=function(){return w(!1)},$=t.id,ee=t.image,te=t.name,ae=t.title,ne=t.address,re=t.description,ce=t.location,le=t.tags,se=Object(p.g)();Object(i.useEffect)((function(){(function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("".concat("http://placesharing.herokuapp.com/api","/places/evaluation/").concat($));case 3:t=e.sent,P(t.place),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[J,W,$,h]);var ie=function(){var e=Object(l.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y.isLoggedIn){e.next=13;break}return e.prev=1,t={likes:y.userId},e.next=5,h("".concat("http://placesharing.herokuapp.com/api","/places/like/").concat($),"POST",JSON.stringify(t),{Authorization:"Bearer "+y.token,"Content-Type":"application/json"});case 5:a=e.sent,M(a),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:e.next=14;break;case 13:se.push("/auth");case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(l.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y.isLoggedIn){e.next=13;break}return e.prev=1,t={disLike:y.userId},e.next=5,h("".concat("http://placesharing.herokuapp.com/api","/places/dislike/").concat($),"POST",JSON.stringify(t),{Authorization:"Bearer "+y.token,"Content-Type":"application/json"});case 5:a=e.sent,Y(a),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:e.next=14;break;case 13:se.push("/auth");case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){A(!1)},pe=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!1),e.prev=1,e.next=4,h("".concat("http://placesharing.herokuapp.com/api","/places/").concat($),"DELETE",null,{Authorization:"Bearer "+y.token});case 4:a($),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(!1),e.next=4,h("".concat("http://placesharing.herokuapp.com/api","/user/bucketlist/").concat($),"PATCH",null,{Authorization:"Bearer "+y.token});case 4:Q(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),U(!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),fe=Object(i.useState)(),de=Object(s.a)(fe,2),he=de[0],Ee=de[1];Object(i.useEffect)((function(){(function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("".concat("http://placesharing.herokuapp.com/api","/users"));case 3:t=e.sent,Ee(t.users),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[h]);var be=function(e){return!!y.userId&&0!==e.find((function(e){return e._id===y.userId})).bucketList.filter((function(e){return e.id===$})).length};return o.a.createElement(i.Fragment,null,o.a.createElement(v.a,{error:r,onClear:E}),o.a.createElement(d.a,{show:C,onCancel:Z,header:ne,contentClass:"place-item__modal-content",footerClass:"place-item__actions",footer:o.a.createElement(f.a,{onClick:Z},"Close")},o.a.createElement("div",{className:"map-container no-select"},o.a.createElement("h2",null,"THE MAP!"),o.a.createElement(b,{center:ce,zoom:16}))),o.a.createElement(d.a,{show:T,onCancel:ue,header:"Are you sure?",className:"place-item__modal-actions",footer:o.a.createElement(i.Fragment,null,o.a.createElement(f.a,{inverse:!0,onClick:ue},"CANCEL"),o.a.createElement(f.a,{danger:!0,onClick:pe},"DELETE"))},o.a.createElement("p",null,"Do you want to proceed and delete this place? note that it can't be undone thereafter.")),he&&o.a.createElement("li",{className:"place-item fade-in"},o.a.createElement(u.a,{className:"place-item__content"},o.a.createElement("div",{className:"place-item__image"},o.a.createElement("img",{src:ee.imageUrl,alt:te})),o.a.createElement("div",{className:"place-item__info"},o.a.createElement("div",{className:"evaluation no-select"},D&&o.a.createElement("div",{className:"like"},o.a.createElement("p",{className:"like-count"},D.likes>=1e3?D.likes.length/1e3+"k":D.likes.length),o.a.createElement("i",{className:"fas fa-thumbs-up fa-2x",onClick:ie,style:{color:D.likes.includes(y.userId)&&"green"}})),D&&o.a.createElement("div",{className:"dislike"},o.a.createElement("p",{className:"dislike-count"},D.disLike>=1e3?D.disLike.length/1e3+"k":D.disLike.length),o.a.createElement("i",{className:"fas fa-thumbs-down fa-2x",onClick:oe,style:{color:D.disLike.includes(y.userId)&&"red"}})))," ",o.a.createElement("p",null,JSON.stringify()),o.a.createElement("h2",null,ae),o.a.createElement("h3",null,ne),o.a.createElement("p",null,re),o.a.createElement("div",null,le.map((function(e){return o.a.createElement(g.a,{key:e,className:"tag-chip",variant:"outlined",color:"primary",size:"small",label:j.b[e]})})))),o.a.createElement("div",{className:"place-item__actions"},o.a.createElement(f.a,{inverse:!0,onClick:function(){return w(!0)}},"VIEW ON MAP"),o.a.createElement(m.b,{to:"/places/".concat($)},o.a.createElement(f.a,null,"DETAILS")),t.creator===y.userId&&o.a.createElement(f.a,{to:"/places/".concat($,"/edit")},"EDIT"),t.creator===y.userId&&o.a.createElement(f.a,{danger:!0,onClick:function(){A(!0)}},"DELETE"),y.token&&t.creator!==y.userId&&q&&!be(he)&&o.a.createElement(f.a,{onClick:me},"ADD TO BUCKET LIST"),be(he)&&y.userId&&o.a.createElement("span",{className:"animated"},"Already in your bucket"," ",o.a.createElement("span",{role:"img","aria-label":"already-in your bucket","aria-hidden":!1},"\u2705")),X&&o.a.createElement("span",{className:" fadeOut animated"},"Added"," ",o.a.createElement("span",{role:"img","aria-label":"added","aria-hidden":!1},"\u2705"))))))}),N=function(e){var t=e.items,a=e.onDeletePlace;return 0===t.length?o.a.createElement("div",{className:"place-list center"},o.a.createElement(u.a,null,o.a.createElement("h2",null,"No places found maybe create one ?"),o.a.createElement(f.a,{to:"/places/new"},"Share place"))):o.a.createElement("ul",{className:"place-list"},t.map((function(e){return o.a.createElement(y,{key:e.id,place:e,onDeletePlace:a})})))},x=(a(102),a(140)),C=a(175),w=a(179);t.default=function(){var e=Object(O.a)(),t=e.isLoading,a=e.error,r=e.sendRequest,u=e.clearError,m=Object(i.useState)(),d=Object(s.a)(m,2),h=d[0],E=d[1],b=Object(p.h)().userId,g=Object(p.g)(),y=Object(i.useContext)(k.a),S=Object(i.useState)(),I=Object(s.a)(S,2),T=I[0],A=I[1],_=Object(i.useState)(""),L=Object(s.a)(_,2),D=L[0],P=L[1],z=Object(i.useState)([]),B=Object(s.a)(z,2),J=B[0],M=B[1];Object(i.useEffect)((function(){(function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r("".concat("http://placesharing.herokuapp.com/api","/users/").concat(b,"/"));case 3:t=e.sent,A(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[r,b]),Object(i.useEffect)((function(){(function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r("".concat("http://placesharing.herokuapp.com/api","/places/user/").concat(b,"/?sortBy=").concat(D,"&tagFilter=").concat(J.join(",")));case 3:t=e.sent,E(t.userWithPlaces),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[r,b,D,J]);var F,H=function(e){var t=e.target.name,a=e.target.checked;M(a?function(e){return e.includes(t)?e:[].concat(Object(n.a)(e),[t])}:function(e){return e.includes(t)?e.filter((function(e){return e!==t})):e})};if(a)return o.a.createElement(v.a,{error:(F=a,h||y.userId===b?h||y.userId!==b?o.a.createElement("h2",null,F):o.a.createElement(i.Fragment,null,o.a.createElement("h2",{className:"center gray-text fade-in-faster"},"You don't have any shared places. Would you like to add one?"),o.a.createElement("div",{className:"center fade-in-faster"},o.a.createElement(f.a,{inverse:!0,to:"/places/new"},"ADD A PLACE"))):o.a.createElement("h2",{className:"center gray-text fade-in-faster"},"There is no place shared by this user")),header:"Hello there!",onClear:function(){g.push("/")}});var W=[];return j.a.map((function(e){var t=J.includes(e.name),a=o.a.createElement("span",{key:e.name},o.a.createElement("label",null,o.a.createElement(x.a,{name:e.name,checked:t,onChange:H,inputProps:{"aria-label":"primary checkbox"}}),e.title),o.a.createElement("span",null,"\xa0\xa0"));W.push(a)})),o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"place-overlay-container fade-in"},o.a.createElement("h2",{className:"center white-text inline no-select"},"Places of"," ",o.a.createElement("span",{className:"yellow-text fade-in"}," ",T&&T.user.name)," "),o.a.createElement(v.a,{error:a,onClear:u}),!t&&h&&o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"sort-filter-layout"},o.a.createElement(C.a,{onChange:function(e){var t=e.target.value;"rate"===t&&P("rate"),"title"===t&&P("title"),"created_at"===t&&P("created_at")},defaultValue:"none",style:{color:"white"}},o.a.createElement(w.a,{value:"none",disabled:!0},"Choose an option to Sort"),o.a.createElement(w.a,{value:"rate"},"Sort By Rate"),o.a.createElement(w.a,{value:"title"},"Sort By Title"),o.a.createElement(w.a,{value:"created_at"},"Sort By Adding Date")),W),o.a.createElement(N,{items:h,onDeletePlace:function(e){E((function(t){return t.filter((function(t){return t.id!==e}))}))}}))))}},61:function(e,t,a){"use strict";var n=a(0),r=a.n(n);a(68);t.a=function(e){return r.a.createElement("div",{className:"card ".concat(e.className),style:e.style},e.children)}},68:function(e,t,a){},77:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n={natural:"Natural",historical:"Historical",outdoor:"Outdoor",touristic:"Touristic"},r=[{name:"natural",title:"Natural"},{name:"historical",title:"Historical"},{name:"outdoor",title:"Outdoor"},{name:"touristic",title:"Touristic"}]},85:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}}]);
//# sourceMappingURL=14.f4a006fd.chunk.js.map